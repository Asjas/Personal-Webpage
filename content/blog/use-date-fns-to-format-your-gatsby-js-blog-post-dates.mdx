---
title: Use date-fns to format your Gatsby.js blog post dates
meta_desc: >-
  In this blog post we will be breaking down different usages of date-fns by
  formatting the dates of Gatsby.js blog posts.
date: 2019-06-18T14:06:08.026Z
updated_at: 2019-06-19T18:01:08.044Z
featured_image: /assets/date-fns.jpg
tags:
  - gatsby
  - javascript
---
## Introduction

In this blog post we will learn more about [date-fns](https://date-fns.org) and why it is such an amazing date utility library to manage your dates in JavaScript. At the time of this blog post we will be using `v2.0.0-alpha.27`. If there is a newer version you can use that as well. We will be using the [gatsby-starter-blog](https://github.com/gatsbyjs/gatsby-starter-blog) Github repo as a starting point. At any point you can browse to the final project on [Github here](https://github.com/Asjas/gatsby-date-fns-starter).

### Why use date-fns?

We have always had the npm package [Moment.js](https://momentjs.com/) as the go-to npm library to manage dates in JavaScript but as time went on the library grew really large and there were no easy ways to split the library up into smaller pieces by using code-splitting. Date-fns changes this. Date-fns is very modular, it supports [tree-shaking](https://webpack.js.org/guides/tree-shaking/) and even supports Internationalization (I18n).

### Getting Started

First things first, you need to create a folder where we will be creating the starter Gatsby project. 

```bash:title=/
mkdir git
cd git
```

Once that has been done we can use [npx](https://www.bram.us/2017/07/15/introducing-npx-an-npm-package-runner/) to create a new Gatsby project based off the Gatsby Starter Repo.

```bash:title=/git/
npx gatsby new gatsby-date-fns-starter https://github.com/gatsbyjs/gatsby-starter-blog
```

When you are asked to choose between `npm` or `yarn` as your package manager you can choose the one you are comfortable with. In this blog post we will be using `yarn`.

You can now navigate into the new Gatsby directory and start the development server to check if the installation succeeded.

```bash:title=/git/
cd gatsby-date-fns-starter
yarn develop
```

This will start a localhost server on `http://localhost:8000`. Open the url in your browser to check if the server has started correctly. It should look like this.

![Gatsby Localhost Server](/static/gatsby-starter-localhost.jpg)

Once you have verified that the server is running we can continue to the next section where we will be installing `date-fns`.

### Installing date-fns

In the same folder where you started the development server you can run the following command to install `date-fns`. We will be installing the latest alpha version as this is the version that supports all of the new functions that we will be using. 

Choose one of the package install commands based on the package manager you are using (npm or yarn).

```bash:title=/git/gatsby-date-fns-starter
npm install date-fns@next --save
yarn add date-fns@next
```

### Using the date-fns format function

Now that we have Gatsby.js and date-fns installed we can now use date-fns to format the dates of our blog posts. In this first example we will be making the following changes to the main landing page which is located in the `src/pages` folder.

1. We need to import the format function from date-fns.
2. We need to update the GraphQL query to import date without formatting it beforehand.
3. We replace the current date with the format function.

```jsx{3,33,64}:title=src/pages/index.js
import React from "react"
import { Link, graphql } from "gatsby"
import { format } from "date-fns";

import Bio from "../components/bio"
import Layout from "../components/layout"
import SEO from "../components/seo"
import { rhythm } from "../utils/typography"

class BlogIndex extends React.Component {
  render() {
    const { data } = this.props
    const siteTitle = data.site.siteMetadata.title
    const posts = data.allMarkdownRemark.edges

    return (
      <Layout location={this.props.location} title={siteTitle}
      <SEO title="All posts" />
        <Bio />
        {posts.map(({ node }) => {
          const title = node.frontmatter.title || node.fields.slug
          return (
            <div key={node.fields.slug}>
              <h3
                style={{
                  marginBottom: rhythm(1 / 4),
                }}
              >
                <Link style={{ boxShadow: `none` }} to={node.fields.slug}>
                  {title}
                </Link>
              </h3>
              <time>{format(new Date(node.frontmatter.date), 'dd MMMM yyyy')}</time>
              <p
                dangerouslySetInnerHTML={{ 
                  __html: node.frontmatter.description || node.excerpt, 
                }}
              />
            </div>
          )
        })}
      </Layout>
    )
  }
}

export default BlogIndex

export const pageQuery = graphql`
  query {
    site {
      siteMetadata {
        title
      }
    }
    allMarkdownRemark(sort: { fields: [frontmatter___date], order: DESC }) {
      edges {
        node {
          excerpt
          fields {
            slug
          }
          frontmatter {
            date
            title
            description
          }
        }
      }
    }
  }
`
```

If everything went great and you are receiving no error messages you should see the dates render on the homepage the same as it did before we used date-fns. You might be wondering why would need to use date-fns to only have the same result as we had before we started using it. The power comes with what date-fns allows us to do when formatting the date.

Here are a few examples of different versions of the `format` function and the output you would receive.

```js:title=index.js
format(new Date(node.frontmatter.date), 'dd MMMM')
// 29 May

format(new Date(node.frontmatter.date), 'dd-MM-yyyy')
// 29-05-2015

format(new Date(node.frontmatter.date), 'dd MMMM yyyy', { locale: ru })
// 29 мая 2015
```

If you want to format dates using different locales you need to import the specific locale into the file to be able to use it. You can read more about this on their [documentation](https://date-fns.org/v2.0.0-alpha.27/docs/I18n) about Internationalization. The best part about date-fns is that because it is modular and uses pure functions only the functions and locales you import into a file will be included. This keeps your JavaScript bundles small.
